<!doctype html>
<html>
<head>
    <title>Home</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/css/bootstrap-select.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/js/bootstrap-select.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <script>
        function cb() {
            let crop = document.getElementById('crop').value
            let tray_position = document.getElementById('tray_position').value
            let treatment = document.getElementById('treatment').value
            let data = {
                    'crop': crop,
                    'tray_position': tray_position,
                    'treatment': treatment
                }
            $.getJSON({
                url: "/callback-1",
                data: data,
                success: function (result) {
                    Plotly.newPlot('chart_1', result, {staticPlot: true});;
                }
            });

            $.getJSON({
                url: "/callback-2",
                data: data,
                success: function (result) {
                    Plotly.newPlot('chart_2', result, {staticPlot: true});;
                }
            });
        }

        function cb2() {
            let variety = document.getElementById('variety').value
            let data = {
                    'variety': variety
                }
            $.getJSON({
                url: "/callback-3",
                data: data,
                success: function (result) {
                    Plotly.newPlot('chart_3', result, {staticPlot: true});;
                }
            });
        }
    </script>
</head>

<body class="container">
<div>
<nav class="navbar navbar-light" style="background-color: #FB0229">
  <a class="navbar-brand" href="#" style="color: white">Plant Health Analysis </a>

<!--    <a class="navbar-brand" href="{{ url_for('compare') }}" style="color: white;float: left">Compare </a>-->


<!--  <div class="collapse navbar-collapse" id="navbarSupportedContent">-->
<!--    <ul class="navbar-nav mr-auto">-->
<!--      <li class="nav-item active">-->
<!--        <a class="nav-link" href="{{ url_for('compare') }}">Compare <span class="sr-only">(current)</span></a>-->
<!--    </ul>-->
<!--  </div>-->
</nav>
    </div>
<div style="margin-left: 10px">


<!--    <div class="btn-group">-->
<!--      <button type="button" class="btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">-->
<!--        Action-->
<!--      </button>-->
<!--      <div class="dropdown-menu">-->
<!--          <a class="dropdown-item" value='Lt63' href="#" onchange="cb()">Lt63</a>-->
<!--          <a class="dropdown-item" value='Lt43' href="#" onclick="cb()">Lt43</a>-->
<!--          <a class="dropdown-item" value='Bs49' href="#" onclick="cb()">Bs49</a>-->
<!--          <a class="dropdown-item" value='Bs79' href="#" onclick="cb()">Bs79</a>-->
<!--          <a class="dropdown-item" value='Cr31' href="#" onclick="cb()">Cr31</a>-->
<!--          <a class="dropdown-item" value='Lt49' href="#" onclick="cb()">Lt49</a>-->
<!--          <a class="dropdown-item" value='Lt98' href="#" onclick="cb()">Lt98</a>-->
<!--          <a class="dropdown-item" value='Mn24' href="#" onclick="cb()">Mn24</a>-->
<!--          <a class="dropdown-item" value='Pr26' href="#" onclick="cb()">Pr26</a>-->
<!--      </div>-->
<!--    </div>-->


    <!-- <label for="crop">Choose a Crop:</label> -->
    <select name="crop" id="crop" onchange="cb()" class="selectpicker" data-style="btn-info" >
        <option value="Lt63">Lt63</option>
        <option value="Lt43">Lt43</option>
        <option value="Bs49">Bs49</option>
        <option value="Bs79">Bs79</option>
        <option value="Cr31">Cr31</option>
        <option value="Lt49">Lt49</option>
        <option value="Lt98">Lt98</option>
        <option value="Mn24">Mn24</option>
        <option value="Pr26">Pr26</option>
    </select>


    <span style="margin-left: 50px">
    <!-- <label for="tray_position">Choose a Tray position:</label> -->
    <select name="tray_position" id="tray_position" onchange="cb()" class="selectpicker" data-style="btn-info" multiple title="Select a Tray Position" data-max-options="1">
        <option value="A7">A7</option>
        <option value="A1">A1</option>
        <option value="A2">A2</option>
        <option value="A3">A3</option>
        <option value="A4">A4</option>
        <option value="A5">A5</option>
        <option value="A6">A6</option>
        <option value="A8">A8</option>
        <option value="A9">A9</option>
        <option value="A10">A10</option>
        <option value="B1">B1</option>
        <option value="B2">B2</option>
        <option value="B3">B3</option>
        <option value="B4">B4</option>
        <option value="B5">B5</option>
        <option value="B6">B6</option>
        <option value="B7">B7</option>
        <option value="B8">B8</option>
        <option value="B9">B9</option>
    </select>
</span>
    <span style="margin-left: 50px;">
    <!-- <label for="treatment">Choose a Treatment:</label> -->
    <select name="treatment" id="treatment" onchange="cb()" class="selectpicker" data-style="btn-info" multiple title="Select a Treatment" data-max-options="1">
        <option value="Control">Control</option>
        <option value="UV5">UV5</option>
        <option value="UV8">UV8</option>
        <option value="all">all</option>
    </select>
    </span>

    <div id="chart_1" class="chart"></div>
    <div id="chart_2" class="chart"></div>

    <label for="variety">Choose a Variety (Crop):</label>
    <select name="variety" id="variety" onchange="cb2()">
        <option value="Italian Basil">Italian Basil</option>
        <option value="Peppermint">Peppermint</option>
        <option value="Flat Parsley">Flat Parsley</option>
        <option value="Mountain Coriander">Mountain Coriander</option>
        <option value="Bordeaux Basil">Bordeaux Basil</option>
    </select>

    <div id="chart_3" class="chart"></div>
    </div>
</body>

<script>
    chart_1 = {{ graph1JSON | safe }};
    //d.config={staticPlot: true};
    Plotly.newPlot('chart_1', chart_1, {});

    chart_2 = {{ graph2JSON | safe }};
    //d.config={staticPlot: true};
    Plotly.newPlot('chart_2', chart_2, {});

    chart_3 = {{ graph3JSON | safe }};
    //d.config={staticPlot: true};
    Plotly.newPlot('chart_3', chart_3, {});

    
</script>
</html>